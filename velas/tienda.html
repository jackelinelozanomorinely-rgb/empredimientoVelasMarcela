<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tienda | Velas Marcela</title>

  <!-- Tailwind + Bootstrap -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- üé® Estilos -->
  <style>
    :root {
      --color-primary: #CBBFAD;
      --color-secondary: #F6F4F2;
      --color-dark: #3C2F2F;
      --color-accent: #D6AD60;
    }

    body {
      background-color: var(--color-secondary);
      color: var(--color-dark);
      font-family: 'Georgia', serif;
    }

    header, footer {
      background-color: var(--color-primary);
      color: var(--color-dark);
    }

    .btn-accent {
      background-color: var(--color-accent);
      color: white;
      transition: 0.3s;
    }

    .btn-accent:hover {
      background-color: #c19a50;
    }

    .shadow-soft {
      box-shadow: 0 4px 10px rgba(60, 47, 47, 0.1);
    }

    .cart-dropdown {
      position: absolute;
      right: 0;
      top: 100%;
      background-color: var(--color-secondary);
      border: 1px solid var(--color-dark);
      border-radius: 8px;
      padding: 1rem;
      width: 320px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      display: none;
      z-index: 50;
    }

    .cart-dropdown.active {
      display: block;
    }

    .product-img {
      transition: transform 0.5s ease, box-shadow 0.5s ease;
      cursor: pointer;
    }

    .product-img:hover {
      transform: scale(1.08);
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

  <!-- üïØÔ∏è Encabezado -->
  <header class="shadow-soft relative">
    <nav class="flex justify-between items-center py-6 px-8 relative">
      <a href="index.html"><h1 class="text-3xl font-serif tracking-wider">Velas Marcela</h1></a>

      <ul class="flex space-x-8 text-lg">
        <li><a href="index.html" class="hover:text-[var(--color-accent)]">Inicio</a></li>
        <li><a href="#productos" class="hover:text-[var(--color-accent)]">Tienda</a></li>
        <li class="relative">
          <button id="cart-btn" class="btn-accent px-4 py-2 rounded-full">üõçÔ∏è Carrito (<span id="cart-count">0</span>)</button>
          <div id="cart-dropdown" class="cart-dropdown">
            <h4 class="font-serif text-lg mb-2">Tu carrito</h4>
            <ul id="cart-items" class="text-sm mb-2"></ul>
            <p class="font-semibold">Total: $<span id="cart-total">0.00</span></p>
            <button id="whatsapp-order" class="mt-3 btn btn-success w-full">üì≤ Finalizar pedido por WhatsApp</button>
            <button id="clear-cart" class="mt-3 btn btn-sm btn-outline-dark w-full">Vaciar carrito</button>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <!-- üõçÔ∏è Secci√≥n de productos -->
  <main class="py-16 px-6" id="productos">
    <h2 class="text-center text-4xl font-serif mb-12">Colecci√≥n artesanal</h2>

    <div class="grid md:grid-cols-3 gap-12 max-w-6xl mx-auto">

      <!-- Producto 1 -->
      <div class="bg-white p-6 rounded-lg shadow-soft text-center">
        <img src="img/9.png" alt="Vela Senda" class="product-img rounded-xl w-full h-80 object-cover mb-4">
        <h3 class="text-xl font-serif">Vela "Senda"</h3>
        <p class="text-sm mb-1">Equilibrio y armon√≠a en una forma minimalista.</p>
        <p class="text-sm text-gray-500">Medidas: 9 x 2,8 cm Aproximada.</p>
        <p class="text-sm text-gray-500">Aroma: Coco / Romero</p>
        <p class="text-sm text-gray-500">Color: Beige / Blanco / Rojo</p>
        <p class="text-lg font-semibold mb-3 mt-2">$15.000 COP</p>
        <button class="btn-accent px-6 py-2 rounded-full add-cart" data-name="Senda" data-price="15000">Agregar al carrito</button>
      </div>

      <!-- Producto 2 -->
      <div class="bg-white p-6 rounded-lg shadow-soft text-center">
        <img src="img/7.png" alt="Bruma" class="product-img rounded-xl w-full h-80 object-cover mb-4">
        <h3 class="text-xl font-serif">Vela "Bruma"</h3>
        <p class="text-sm mb-1">Suavidad y paz en una sola vela, ideal para regalar.</p>
        <p class="text-sm text-gray-500">Medidas: 3,7 x 3,7 x 3,7 cm - Aproximada.</p>
        <p class="text-sm text-gray-500">Aroma: Coco / Romero</p>
        <p class="text-sm text-gray-500">Color: Beige / Blanco / Rojo</p>
        <p class="text-lg font-semibold mb-3 mt-2">$7.000 COP</p>
        <button class="btn-accent px-6 py-2 rounded-full add-cart" data-name="Bruma" data-price="7000">Agregar al carrito</button>
      </div>

      <!-- Producto 3 -->
      <div class="bg-white p-6 rounded-lg shadow-soft text-center">
        <img src="img/1.png" alt="Alba" class="product-img rounded-xl w-full h-80 object-cover mb-4">
        <h3 class="text-xl font-serif">Vela "Alba"</h3>
        <p class="text-sm mb-1">Hecha para acompa√±ar momentos de introspecci√≥n y descanso.</p>
        <p class="text-sm text-gray-500">Medidas: 3,7 x 3,7 x 3,7 cm - Aproximada.</p>
        <p class="text-sm text-gray-500">Aroma: Coco / Romero</p>
        <p class="text-sm text-gray-500">Color: Beige / Blanco / Rojo</p>
        <p class="text-lg font-semibold mb-3 mt-2">$7.000 COP</p>
        <button class="btn-accent px-6 py-2 rounded-full add-cart" data-name="Alba" data-price="7000">Agregar al carrito</button>
      </div>

      <!-- Producto 4 -->
      <div class="bg-white p-6 rounded-lg shadow-soft text-center">
        <img src="img/3.png" alt="Runa" class="product-img rounded-xl w-full h-80 object-cover mb-4">
        <h3 class="text-xl font-serif">Vela "Runa"</h3>
        <p class="text-sm mb-1">Textura c√°lida y elegante, perfecta para espacios acogedores.</p>
        <p class="text-sm text-gray-500">Medidas: 3,7 x 3,7 x 3,7 cm - Aproximada.</p>
        <p class="text-sm text-gray-500">Aroma: Coco / Romero</p>
        <p class="text-sm text-gray-500">Color: Beige / Blanco / Rojo</p>
        <p class="text-lg font-semibold mb-3 mt-2">$7.000 COP</p>
        <button class="btn-accent px-6 py-2 rounded-full add-cart" data-name="Runa" data-price="7000">Agregar al carrito</button>
      </div>

      <!-- Producto 5 -->
      <div class="bg-white p-6 rounded-lg shadow-soft text-center">
        <img src="img/12.jpg" alt="Coraz√≥n" class="product-img rounded-xl w-full h-80 object-cover mb-4">
        <h3 class="text-xl font-serif">Vela ‚ÄúCoraz√≥n‚Äù</h3>
        <p class="text-sm mb-1">Simboliza energ√≠a y abundancia con un dise√±o √∫nico.</p>
        <p class="text-sm text-gray-500">Medidas: 3,7 x 3,7 x 3,7 cm - Aproximada.</p>
        <p class="text-sm text-gray-500">Aroma: Coco / Romero / Canela</p>
        <p class="text-sm text-gray-500">Color: Beige / Blanco / Rojo</p>
        <p class="text-lg font-semibold mb-3 mt-2">$7.000 COP</p>
        <button class="btn-accent px-6 py-2 rounded-full add-cart" data-name="Coraz√≥n" data-price="7000">Agregar al carrito</button>
      </div>

      <!-- Producto 6 -->
      <div class="bg-white p-6 rounded-lg shadow-soft text-center">
        <img src="img/5.png" alt="Nube" class="product-img rounded-xl w-full h-80 object-cover mb-4">
        <h3 class="text-xl font-serif">Vela "Nube"</h3>
        <p class="text-sm mb-1">Un detalle que enciende el amor y la conexi√≥n emocional.</p>
        <p class="text-sm text-gray-500">Medidas: 3,7 x 3,7 x 3,7 cm - Aproximada.</p>
        <p class="text-sm text-gray-500">Aroma: Coco / Fresa / Romero</p>
        <p class="text-sm text-gray-500">Color: Beige / Blanco / Rojo</p>
        <p class="text-lg font-semibold mb-3 mt-2">$7.000 COP</p>
        <button class="btn-accent px-6 py-2 rounded-full add-cart" data-name="Nube" data-price="7000">Agregar al carrito</button>
      </div>
    </div>

    <!-- Personalizaci√≥n -->
    <div class="mt-12 bg-[#efeae5] py-6 rounded-2xl max-w-4xl mx-auto text-center">
      <p class="text-[#3e2c1b] font-medium text-lg">
        ‚ú® Todas nuestras velas pueden personalizarse con la <strong>fragancia</strong> que prefieras (Coco o Romero)
        y en el <strong>color</strong> de tu elecci√≥n (Beige, Blanco o Rojo).
      </p>
    </div>
  </main>

  <!-- üßæ FORMULARIO DE PEDIDO -->
  <div id="order-form" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white p-8 rounded-2xl shadow-lg max-w-md w-full relative">
      <h3 class="text-2xl font-serif mb-4 text-center">Finalizar compra üïØÔ∏è</h3>
      <p class="text-center text-sm text-gray-600 mb-2">üöö El costo del domicilio es adicional y depende del lugar de entrega.</p>
      <button id="close-form" class="absolute top-3 right-4 text-gray-500 hover:text-gray-700 text-xl">&times;</button>

      <form id="purchase-form" class="space-y-3">
        <input type="text" id="nombre" placeholder="Nombre completo" class="w-full border p-2 rounded-md" required>
        <input type="text" id="direccion" placeholder="Direcci√≥n de env√≠o" class="w-full border p-2 rounded-md" required>
        <input type="text" id="ciudad" placeholder="Ciudad o lugar de entrega" class="w-full border p-2 rounded-md" required>
        <input type="text" id="aroma" placeholder="Aroma (Coco, Romero...)" class="w-full border p-2 rounded-md">
        <input type="text" id="color" placeholder="Color (Beige, Rojo, Blanco...)" class="w-full border p-2 rounded-md">
        <input type="number" id="cantidad" placeholder="Cantidad" min="1" class="w-full border p-2 rounded-md">
        <input type="text" id="pago" placeholder="M√©todo de pago (Nequi, Efectivo...)" class="w-full border p-2 rounded-md">
        <textarea id="notas" placeholder="Notas adicionales" class="w-full border p-2 rounded-md"></textarea>
        <button type="submit" class="bg-[#D6AD60] w-full text-white py-2 rounded-md hover:bg-[#c19a50]">
          Enviar pedido por WhatsApp
        </button>
      </form>
    </div>
  </div>

  <!-- üìû Pie de p√°gina -->
  <footer class="py-10 border-t border-[var(--color-dark)] text-center">
    <p>¬© 2025 Velas Marcela ‚Äî Todos los derechos reservados</p>
  </footer>

  <!-- üß† Script del carrito -->
  <script>
    let cart = JSON.parse(localStorage.getItem('velasMarcelaCart')) || [];

    const cartBtn = document.getElementById('cart-btn');
    const cartDropdown = document.getElementById('cart-dropdown');
    const cartItems = document.getElementById('cart-items');
    const cartTotal = document.getElementById('cart-total');
    const cartCount = document.getElementById('cart-count');
    const clearCart = document.getElementById('clear-cart');
    const whatsappOrder = document.getElementById('whatsapp-order');

    cartBtn.addEventListener('click', () => {
      cartDropdown.classList.toggle('active');
      renderCart();
    });

    document.querySelectorAll('.add-cart').forEach(btn => {
      btn.addEventListener('click', () => {
        const name = btn.dataset.name;
        const price = parseFloat(btn.dataset.price);
        cart.push({ name, price });
        localStorage.setItem('velasMarcelaCart', JSON.stringify(cart));
        updateCartCount();
        renderCart();
      });
    });

    function renderCart() {
      cartItems.innerHTML = '';
      let total = 0;
      cart.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.name} ‚Äî $${item.price.toLocaleString()}`;
        cartItems.appendChild(li);
        total += item.price;
      });
      cartTotal.textContent = total.toLocaleString();
    }

    function updateCartCount() {
      cartCount.textContent = cart.length;
    }

    clearCart.addEventListener('click', () => {
      cart = [];
      localStorage.removeItem('velasMarcelaCart');
      renderCart();
      updateCartCount();
    });

    // üßæ L√≥gica del formulario
    const orderForm = document.getElementById('order-form');
    const closeForm = document.getElementById('close-form');
    const purchaseForm = document.getElementById('purchase-form');

    whatsappOrder.addEventListener('click', () => {
      if (cart.length === 0) {
        alert("Tu carrito est√° vac√≠o üïØÔ∏è");
        return;
      }
      orderForm.classList.remove('hidden');
    });

    closeForm.addEventListener('click', () => {
      orderForm.classList.add('hidden');
    });

    purchaseForm.addEventListener('submit', (e) => {
      e.preventDefault();

      const nombre = document.getElementById('nombre').value;
      const direccion = document.getElementById('direccion').value;
      const ciudad = document.getElementById('ciudad').value;
      const aroma = document.getElementById('aroma').value;
      const color = document.getElementById('color').value;
      const cantidad = document.getElementById('cantidad').value;
      const pago = document.getElementById('pago').value;
      const notas = document.getElementById('notas').value;

      let message = "üïØÔ∏è *Pedido desde Velas Marcela*%0A%0A";
      cart.forEach((item, index) => {
        message += `${index + 1}. ${item.name} ‚Äî $${item.price.toLocaleString()}%0A`;
      });

      const total = cart.reduce((sum, item) => sum + item.price, 0);
      message += `%0Aüí∞ *Total:* $${total.toLocaleString()} COP%0A(üöö El costo del domicilio es adicional)%0A%0A`;
      message += `üë§ *Nombre:* ${nombre}%0Aüìç *Direcci√≥n:* ${direccion}%0AüèôÔ∏è *Ciudad:* ${ciudad}%0Aüå∏ *Aroma:* ${aroma}%0Aüé® *Color:* ${color}%0Aüì¶ *Cantidad:* ${cantidad}%0Aüí≥ *Pago:* ${pago}%0Aüìù *Notas:* ${notas}%0A%0A`;

      const whatsappUrl = `https://wa.me/573234480931?text=${message}`;
      window.open(whatsappUrl, "_blank");

      orderForm.classList.add('hidden');
    });

    updateCartCount();
    renderCart();
  </script>

</body>
</html>
